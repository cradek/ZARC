v 20200604 2
C 48800 52700 0 0 0 title-A2.sym
{
T 48800 52700 15 10 1 1 0 0 1
netname=D?
}
T 64600 53600 9 10 1 0 0 0 1
ZARC Front Panel Operation State Machine
T 68900 53100 9 10 1 0 0 0 1
21/2/2021
T 69000 52800 9 10 1 0 0 0 1
Merlin Skinner
T 65000 53100 9 10 1 0 0 0 1
Control_4.sch
N 52000 64600 50000 64600 4
{
T 50000 64600 5 10 1 1 0 0 1
netname=DO_NEXT
}
N 52000 64200 50000 64200 4
{
T 50000 64200 5 10 1 1 0 0 1
netname=DO_STEP
}
N 55200 57700 50000 57700 4
{
T 50000 57700 5 10 1 1 0 0 1
netname=CPU_CLK_B
}
N 50000 58000 55200 58000 4
{
T 50000 58000 5 10 1 1 0 0 1
netname=CYCLE
}
N 55200 60500 55000 60500 4
N 50000 65800 52000 65800 4
{
T 50000 65800 5 10 1 1 0 0 1
netname=DO_WRITE
}
N 54800 59800 55200 59800 4
N 54600 59100 55200 59100 4
N 53300 64400 59500 64400 4
{
T 59500 64400 5 10 1 1 0 6 1
netname=DO_STEPORNEXT
}
C 55200 57600 1 0 0 74ls175-1.sym
{
T 55500 61740 5 10 0 0 0 0 1
device=74LS175
T 55500 61540 5 10 0 0 0 0 1
footprint=DIP16
T 56900 60900 5 10 1 1 0 6 1
refdes=U29
}
N 53500 63900 53500 64400 4
N 55000 60500 55000 63700 4
N 52000 65400 51800 65400 4
N 51800 65400 51800 64600 4
N 53300 65600 59500 65600 4
{
T 59500 65600 5 10 1 1 0 6 1
netname=DO_WRITEORNEXT
}
N 57200 60500 61000 60500 4
{
T 59500 60500 5 10 1 1 0 0 1
netname=DO_A
}
N 57400 60500 57400 61500 4
N 57400 61500 54800 61500 4
N 54800 61500 54800 59800 4
N 57200 59800 61200 59800 4
{
T 59500 59800 5 10 1 1 0 0 1
netname=DO_B
}
N 57200 59100 57800 59100 4
N 57200 58100 61700 58100 4
{
T 59500 58100 5 10 1 1 0 0 1
netname=\_DO_D\_
}
N 57600 59800 57600 61700 4
N 57600 61700 54600 61700 4
N 54600 61700 54600 59100 4
N 57800 59100 57800 61900 4
N 57800 61900 54400 61900 4
N 54400 58400 55200 58400 4
N 67300 67000 71000 67000 4
{
T 71000 67000 5 10 1 1 0 6 1
netname=\_FPGA_BUF_INH\_
}
N 61000 66800 64700 66800 4
N 61000 57300 61000 66800 4
N 53500 66300 53500 65600 4
N 53500 66700 50000 66700 4
{
T 50000 66700 5 10 1 1 0 0 1
netname=MAN
}
N 55000 66500 55000 67000 4
N 55000 67400 50000 67400 4
{
T 50000 67400 5 10 1 1 0 0 1
netname=RD
}
N 55000 66500 54800 66500 4
C 55000 66700 1 0 0 74ls08-1.sym
{
T 55700 67600 5 10 0 0 0 0 1
device=74LS08
T 55300 67600 5 10 1 1 0 0 1
refdes=U39
T 55700 69000 5 10 0 0 0 0 1
footprint=DIP14
T 55000 66700 5 10 0 0 0 0 1
slot=2
}
N 56300 67200 64700 67200 4
{
T 59500 67200 5 10 1 1 0 6 1
netname=USE_PNL_DATA
}
C 64700 63900 1 0 0 74ls00-1.sym
{
T 65200 64800 5 10 0 0 0 0 1
device=74LS00
T 65000 64800 5 10 1 1 0 0 1
refdes=U19
T 65200 66150 5 10 0 0 0 0 1
footprint=DIP14
T 64700 63900 5 10 0 0 0 0 1
slot=2
}
N 68800 65700 71000 65700 4
{
T 71000 65700 5 10 1 1 0 6 1
netname=\_RAM_OE\_
}
C 67500 65200 1 0 0 74hct32-1.sym
{
T 68100 66100 5 10 0 0 0 0 1
device=74HCT32
T 68100 67500 5 10 0 0 0 0 1
footprint=DIP14
T 67800 66100 5 10 1 1 0 0 1
refdes=U42
T 67500 65200 5 10 0 0 0 0 1
slot=1
}
N 64800 65500 67500 65500 4
{
T 64800 65500 5 10 1 1 0 0 1
netname=\_RD\_
}
C 64700 66500 1 0 0 74ls08-1.sym
{
T 65400 67400 5 10 0 0 0 0 1
device=74LS08
T 65000 67400 5 10 1 1 0 0 1
refdes=U39
T 65400 68800 5 10 0 0 0 0 1
footprint=DIP14
T 64700 66500 5 10 0 0 0 0 1
slot=3
}
N 66200 67000 66000 67000 4
N 66200 67000 66200 65900 4
N 66200 65900 67500 65900 4
T 67000 68200 9 10 1 0 0 0 2
Note: panel data is only for reads, so we never
need to cope with I/O buffer turnaround.
N 66000 64400 71000 64400 4
{
T 71000 64400 5 10 1 1 0 6 1
netname=\_PNL_IO_BUF_EN\_
}
N 61900 67200 61900 64600 4
N 61900 64600 64700 64600 4
N 61200 64000 63200 64000 4
N 55000 63700 54800 63700 4
N 61200 64000 61200 59800 4
T 71000 62700 9 10 1 0 0 6 1
NEXT generates NOPs by disabling the panel data switches common supply.
N 65800 60000 66300 60000 4
C 66500 58600 1 0 0 74ls32-1.sym
{
T 67100 59500 5 10 0 0 0 0 1
device=74LS32
T 67100 60900 5 10 0 0 0 0 1
footprint=DIP14
T 66700 59500 5 10 1 1 0 0 1
refdes=U40
T 66500 58600 5 10 0 0 0 0 1
slot=2
}
N 69800 59300 71000 59300 4
{
T 71000 59300 5 10 1 1 0 6 1
netname=\_RAM_WE\_
}
N 66500 59300 66300 59300 4
N 66300 59300 66300 60000 4
N 66500 58900 64200 58900 4
{
T 64200 58900 5 10 1 1 0 0 1
netname=DO_STEPORNEXT
}
N 61200 60200 62200 60200 4
N 61700 58100 61700 63600 4
N 54400 58400 54400 61900 4
N 53500 63500 51600 63500 4
N 51600 63500 51600 65800 4
N 61000 57300 66500 57300 4
C 62200 59500 1 0 0 74ls08-1.sym
{
T 62900 60400 5 10 0 0 0 0 1
device=74LS08
T 62500 60400 5 10 1 1 0 0 1
refdes=U30
T 62900 61800 5 10 0 0 0 0 1
footprint=DIP14
T 62200 59500 5 10 0 0 0 0 1
slot=4
}
N 63500 60000 64300 60000 4
C 66500 57000 1 0 0 74ls00-1.sym
{
T 67000 57900 5 10 0 0 0 0 1
device=74LS00
T 66800 57900 5 10 1 1 0 0 1
refdes=U19
T 67000 59250 5 10 0 0 0 0 1
footprint=DIP14
T 66500 57000 5 10 0 0 0 0 1
slot=4
}
N 67800 57500 68000 57500 4
N 66500 57700 66500 58900 4
N 57200 58400 60000 58400 4
{
T 60000 58400 5 10 1 1 0 6 1
netname=DO_D
}
N 61700 63600 63200 63600 4
C 63200 63300 1 0 0 74ls08-1.sym
{
T 63900 64200 5 10 0 0 0 0 1
device=74LS08
T 63500 64200 5 10 1 1 0 0 1
refdes=U39
T 63900 65600 5 10 0 0 0 0 1
footprint=DIP14
T 63200 63300 5 10 0 0 0 0 1
slot=4
}
N 64700 64200 64700 63800 4
N 64700 63800 64500 63800 4
C 64500 59500 1 0 0 74ls00-1.sym
{
T 65000 60400 5 10 0 0 0 0 1
device=74LS00
T 64800 60400 5 10 1 1 0 0 1
refdes=U19
T 65000 61750 5 10 0 0 0 0 1
footprint=DIP14
T 64500 59500 5 10 0 0 0 0 1
slot=3
}
N 64300 59800 64300 60200 4
N 64500 59800 64300 59800 4
N 64300 60200 64500 60200 4
C 53500 66000 1 0 0 74ls32-1.sym
{
T 53800 66000 5 10 0 1 0 0 1
device=74LS32
T 53800 66900 5 10 1 1 0 0 1
refdes=U18
T 54100 68300 5 10 0 0 0 0 1
footprint=DIP14
T 53500 66000 5 10 0 0 0 0 1
slot=1
}
C 52000 65100 1 0 0 74ls32-1.sym
{
T 52300 65100 5 10 0 1 0 0 1
device=74LS32
T 52300 66000 5 10 1 1 0 0 1
refdes=U18
T 52600 67400 5 10 0 0 0 0 1
footprint=DIP14
T 52000 65100 5 10 0 0 0 0 1
slot=2
}
C 52000 63900 1 0 0 74ls32-1.sym
{
T 52300 63900 5 10 0 1 0 0 1
device=74LS32
T 52300 64800 5 10 1 1 0 0 1
refdes=U18
T 52600 66200 5 10 0 0 0 0 1
footprint=DIP14
T 52000 63900 5 10 0 0 0 0 1
slot=3
}
C 53500 63200 1 0 0 74ls32-1.sym
{
T 53800 63200 5 10 0 1 0 0 1
device=74LS32
T 53800 64100 5 10 1 1 0 0 1
refdes=U18
T 54100 65500 5 10 0 0 0 0 1
footprint=DIP14
T 53500 63200 5 10 0 0 0 0 1
slot=4
}
C 66200 66500 1 0 0 74hct04-1.sym
{
T 66600 66600 5 10 0 1 0 0 1
device=74HCT04
T 66500 67400 5 10 1 1 0 0 1
refdes=U31
T 66800 70000 5 10 0 0 0 0 1
footprint=DIP14
T 66200 66500 5 10 0 0 0 0 1
slot=6
}
C 58000 60100 1 0 0 nc-right-2.sym
{
T 58100 60600 5 10 0 0 0 0 1
value=NoConnection
T 58100 60800 5 10 0 0 0 0 1
device=DRC_Directive
}
C 58000 59400 1 0 0 nc-right-2.sym
{
T 58100 59900 5 10 0 0 0 0 1
value=NoConnection
T 58100 60100 5 10 0 0 0 0 1
device=DRC_Directive
}
N 57200 60200 58000 60200 4
N 58000 59500 57200 59500 4
N 57200 58800 61400 58800 4
{
T 59500 58800 5 10 1 1 0 0 1
netname=\_DO_C\_
}
C 68500 58800 1 0 0 74hct08-1.sym
{
T 69200 59700 5 10 0 0 0 0 1
device=74HCT08
T 68800 59700 5 10 1 1 0 0 1
refdes=U21
T 69200 61100 5 10 0 0 0 0 1
footprint=DIP14
}
N 68500 59100 67800 59100 4
N 67000 61100 66000 61100 4
{
T 66000 61100 5 10 1 1 0 0 1
netname=\_WR\_
}
N 67000 61500 66000 61500 4
{
T 66000 61500 5 10 1 1 0 0 1
netname=PROT
}
N 68500 59500 68500 61300 4
N 68500 61300 68300 61300 4
C 67000 60800 1 0 0 74hct32-1.sym
{
T 67600 61700 5 10 0 0 0 0 1
device=74HCT32
T 67600 63100 5 10 0 0 0 0 1
footprint=DIP14
T 67300 61700 5 10 1 1 0 0 1
refdes=U42
T 67000 60800 5 10 0 0 0 0 1
slot=4
}
N 69300 56300 71000 56300 4
{
T 71000 56300 5 10 1 1 0 6 1
netname=PNL_WAIT
}
N 68000 56100 64200 56100 4
{
T 64200 56100 5 10 1 1 0 0 1
netname=\_RUN\_
}
C 68000 55800 1 0 0 74ls08-1.sym
{
T 68700 56700 5 10 0 0 0 0 1
device=74LS08
T 68700 58100 5 10 0 0 0 0 1
footprint=DIP14
T 68000 55800 5 10 0 0 0 0 1
slot=2
T 68300 56700 5 10 1 1 0 0 1
refdes=U17
}
N 68000 57500 68000 56500 4
N 61400 58800 61400 59800 4
N 61400 59800 62200 59800 4
T 68300 57400 9 10 1 0 0 0 2
PNL_WAIT is released early to allow
for one cycle delay before \_WAIT\_.
T 54100 56500 9 10 1 0 0 0 1
States: 
T 54100 56200 9 10 1 0 0 0 1
A - Disable FPGA I/O data & RAM read data.  Start release of Z80 WAIT (STEP or NEXT).
T 54100 56000 9 10 1 0 0 0 1
B - Enable I/O and panel data buffers.
T 54100 55800 9 10 1 0 0 0 1
C - Generate write strobe (WRITE)
T 54100 55600 9 10 1 0 0 0 1
D - Disable I/O and panel data buffers.
T 54100 55400 9 10 1 0 0 0 1
E - End write cycle.
T 54100 55100 9 10 1 0 0 0 1
NEXT and STEP cycles are ended by the end of the Z80 bus cycle.
